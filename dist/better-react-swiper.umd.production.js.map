{"version":3,"file":"better-react-swiper.umd.production.js","sources":["../src/styles.tsx","../src/index.tsx"],"sourcesContent":["import styled, { css } from 'styled-components';\n\nconst isMobile = (media: 'xs' | 'sm' | 'md') => {\n  return media === 'xs' || media === 'sm';\n};\n\nconst color = {\n  blue: '#105783',\n};\n\nexport const SwiperCanvas = styled.div`\n  box-sizing: content-box;\n  display: flex;\n  flex-wrap: nowrap;\n  width: calc(100% - 120px);\n  margin: 0;\n  padding: 0 60px;\n  mask-image: -webkit-gradient(\n    linear,\n    left top,\n    right top,\n    color-stop(0, rgba(0, 0, 0, 0)),\n    color-stop(0.05, rgba(0, 0, 0, 1)),\n    color-stop(0.95, rgba(0, 0, 0, 1)),\n    color-stop(1, rgba(0, 0, 0, 0))\n  );\n  overflow: hidden;\n`;\n\nconst arrowStyles = css`\n  box-sizing: content-box;\n  cursor: pointer;\n  background: #fff;\n  border: 0;\n  color: ${color.blue};\n  border-radius: 4px;\n  box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.2);\n  font-size: 12px;\n  width: 30px;\n  height: 30px;\n  position: absolute;\n  top: 50%;\n  margin-top: -15px;\n  z-index: 1;\n  transition: 0.3s opacity;\n`;\n\nexport const ArrowLeft = styled.button<{ faded: boolean }>`\n  ${arrowStyles};\n  opacity: ${props => (props.faded ? 0.25 : 1)};\n  left: 10px;\n`;\n\nexport const ArrowRight = styled.button<{ faded: boolean }>`\n  ${arrowStyles};\n  opacity: ${props => (props.faded ? 0.25 : 1)};\n  right: 10px;\n`;\n\nexport const Item = styled.div<{\n  currentIndex: number;\n  itemsWide: number;\n}>`\n  transition: 0.3s left;\n  position: relative;\n  width: ${props => 100 / props.itemsWide}%;\n  flex: 0 0 ${props => 100 / props.itemsWide}%;\n  display: flex;\n`;\n\nexport const SwiperWrapper = styled.div<{ media: 'xs' | 'sm' | 'md' }>`\n  position: relative;\n\n  ${SwiperCanvas} {\n    ${props =>\n      isMobile(props.media)\n        ? css`\n            width: calc(100% - 80px);\n            padding: 0 40px;\n          `\n        : null}\n  }\n\n  ${ArrowLeft} {\n    ${props =>\n      isMobile(props.media)\n        ? css`\n            left: 5px;\n          `\n        : null}\n  }\n\n  ${ArrowRight} {\n    ${props =>\n      isMobile(props.media)\n        ? css`\n            right: 5px;\n          `\n        : null}\n  }\n\n  ${Item} {\n    ${props =>\n      isMobile(props.media)\n        ? css`\n            width: 100%;\n            flex-basis: 100%;\n          `\n        : null}\n  }\n`;\n","import React, { useState } from 'react';\nimport ReactResizeDetector from 'react-resize-detector';\nimport { EventData, Swipeable, SwipeableOptions } from 'react-swipeable';\n\nimport {\n  ArrowLeft,\n  ArrowRight,\n  Item,\n  SwiperCanvas,\n  SwiperWrapper,\n} from './styles';\n\nconst MEDIA_MAX_XS = 576;\nconst MEDIA_MAX_SM = 767;\n\ninterface SwiperProps {\n  items: any[];\n  itemsWide?: number;\n  infinity?: boolean;\n  canvasClassName?: string;\n  canvasStyle?: React.CSSProperties;\n  arrowClassName?: string;\n  arrowStyle?: React.CSSProperties;\n  style?: React.CSSProperties;\n}\n\nconst Swiper = ({\n  items = [],\n  itemsWide = 3,\n  infinity = false,\n  canvasClassName,\n  canvasStyle,\n  arrowClassName,\n  arrowStyle,\n  style,\n}: SwiperProps): JSX.Element => {\n  const [currentIndex, setCurrentIndex] = useState<number>(0);\n  const [slideOffset, setSlideOffset] = useState<number>(0);\n  // TODO: there has to be a better way...\n  const [lastSwipe, setLastSwipe] = useState<number | null>(null);\n  const [width, setWidth] = useState<number>(0);\n\n  const computeMedia = () => {\n    if (width <= MEDIA_MAX_XS) {\n      return 'xs';\n    }\n    if (width <= MEDIA_MAX_SM) {\n      return 'sm';\n    }\n    return 'md';\n  };\n\n  const computeItemWidth = () => {\n    return width <= MEDIA_MAX_SM ? 1 : itemsWide;\n  };\n\n  const canGoToPrevious = () => {\n    return (infinity && items.length > 1) || currentIndex !== 0;\n  };\n\n  const canGoToNext = () => {\n    const computedWide = computeItemWidth();\n\n    return (\n      (infinity && items.length > 1) ||\n      currentIndex < items.length - computedWide\n    );\n  };\n\n  const previous = () => {\n    const computedWide = computeItemWidth();\n\n    const steps = currentIndex === 0 ? computedWide : 1;\n    const prev = (items.length + currentIndex - steps) % items.length;\n\n    setCurrentIndex(canGoToPrevious() ? prev : currentIndex);\n  };\n\n  const next = () => {\n    const computedWide = computeItemWidth();\n\n    const steps = items.length - currentIndex > computedWide ? 1 : computedWide;\n    const next = (items.length + currentIndex + steps) % items.length;\n\n    setCurrentIndex(canGoToNext() ? next : currentIndex);\n  };\n\n  const resetSwipe = () => {\n    const now = new Date().getTime();\n    setSlideOffset(0);\n    setLastSwipe(now);\n  };\n\n  const onSwiping = (e: EventData) => {\n    const now = new Date().getTime();\n\n    if (!width) {\n      return;\n    }\n\n    if (lastSwipe && now - lastSwipe < 250) {\n      return;\n    }\n\n    const draggedPercent = (e.deltaX * 2) / width;\n\n    setSlideOffset(draggedPercent * 100);\n\n    if (draggedPercent < -0.3333) {\n      resetSwipe();\n      next();\n    }\n\n    if (draggedPercent > 0.3333) {\n      resetSwipe();\n      previous();\n    }\n  };\n\n  const onSwipeEnd = () => {\n    setSlideOffset(0);\n  };\n\n  const onResize = (width: number) => {\n    setWidth(width);\n  };\n\n  const swipeConfig: SwipeableOptions = {\n    trackTouch: true,\n    trackMouse: true,\n  };\n\n  // const hideArrows = false;\n  // const hideArrows = items.length <= itemsWide;\n\n  console.log('v2');\n\n  return (\n    <ReactResizeDetector handleWidth onResize={onResize}>\n      <SwiperWrapper style={style} media={computeMedia()}>\n        {/* {!hideArrows && (\n          <ArrowLeft\n            data-testid=\"prev\"\n            faded={!canGoToPrevious()}\n            onClick={previous}\n            className={arrowClassName}\n            style={arrowStyle}\n          >\n            ◀abc\n          </ArrowLeft>\n        )} */}\n        <ArrowLeft\n          data-testid=\"prev\"\n          faded={!canGoToPrevious()}\n          onClick={previous}\n          className={arrowClassName}\n          style={arrowStyle}\n        >\n          ◀abc\n        </ArrowLeft>\n        <Swipeable\n          onSwiping={eventData => onSwiping(eventData)}\n          onSwiped={onSwipeEnd}\n          {...swipeConfig}\n        >\n          defs\n          <SwiperCanvas className={canvasClassName} style={canvasStyle}>\n            {items.map((item, i) => (\n              <Item\n                key={i}\n                itemsWide={computeItemWidth()}\n                currentIndex={currentIndex}\n                data-testid=\"item\"\n                style={{\n                  left: `-${(currentIndex * 100) / computeItemWidth() -\n                    slideOffset}%`,\n                }}\n              >\n                {item}\n              </Item>\n            ))}\n          </SwiperCanvas>\n        </Swipeable>\n        {/* {!hideArrows && (\n          <ArrowRight\n            data-testid=\"next\"\n            faded={!canGoToNext()}\n            onClick={next}\n            className={arrowClassName}\n            style={arrowStyle}\n          >\n            ▶\n          </ArrowRight>\n        )} */}\n        <ArrowRight\n          data-testid=\"next\"\n          faded={!canGoToNext()}\n          onClick={next}\n          className={arrowClassName}\n          style={arrowStyle}\n        >\n          ▶\n        </ArrowRight>\n      </SwiperWrapper>\n    </ReactResizeDetector>\n  );\n};\n\nexport default Swiper;\n"],"names":["isMobile","media","SwiperCanvas","styled","div","arrowStyles","css","ArrowLeft","button","props","faded","ArrowRight","Item","itemsWide","SwiperWrapper","items","infinity","canvasClassName","canvasStyle","arrowClassName","arrowStyle","style","currentIndex","setCurrentIndex","useState","slideOffset","setSlideOffset","lastSwipe","setLastSwipe","width","setWidth","computeItemWidth","canGoToPrevious","length","canGoToNext","computedWide","previous","steps","prev","next","resetSwipe","now","Date","getTime","console","log","React","ReactResizeDetector","handleWidth","onResize","computeMedia","onClick","className","Swipeable","onSwiping","eventData","e","draggedPercent","deltaX","onSwiped","trackTouch","trackMouse","map","item","i","key","left"],"mappings":"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"}