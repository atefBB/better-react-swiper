{"version":3,"file":"better-react-swiper.cjs.development.js","sources":["../src/styles.tsx","../src/index.tsx"],"sourcesContent":["import styled, { css } from 'styled-components';\n\nconst isMobile = (media: 'xs' | 'sm' | 'md') => {\n  return media === 'xs' || media === 'sm';\n};\n\nconst color = {\n  blue: '#105783',\n};\n\nexport const SwiperCanvas = styled.div`\n  box-sizing: content-box;\n  display: flex;\n  flex-wrap: nowrap;\n  width: calc(100% - 120px);\n  margin: 0;\n  padding: 0 60px;\n  mask-image: -webkit-gradient(\n    linear,\n    left top,\n    right top,\n    color-stop(0, rgba(0, 0, 0, 0)),\n    color-stop(0.05, rgba(0, 0, 0, 1)),\n    color-stop(0.95, rgba(0, 0, 0, 1)),\n    color-stop(1, rgba(0, 0, 0, 0))\n  );\n  overflow: hidden;\n`;\n\nconst arrowStyles = css`\n  box-sizing: content-box;\n  cursor: pointer;\n  background: #fff;\n  border: 0;\n  color: ${color.blue};\n  border-radius: 4px;\n  box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.2);\n  font-size: 12px;\n  width: 30px;\n  height: 30px;\n  position: absolute;\n  top: 50%;\n  margin-top: -15px;\n  z-index: 1;\n  transition: 0.3s opacity;\n`;\n\nexport const ArrowLeft = styled.button<{ faded: boolean }>`\n  ${arrowStyles};\n  opacity: ${props => (props.faded ? 0.25 : 1)};\n  left: 10px;\n`;\n\nexport const ArrowRight = styled.button<{ faded: boolean }>`\n  ${arrowStyles};\n  opacity: ${props => (props.faded ? 0.25 : 1)};\n  right: 10px;\n`;\n\nexport const Item = styled.div<{\n  currentIndex: number;\n  itemsWide: number;\n}>`\n  transition: 0.3s left;\n  position: relative;\n  width: ${props => 100 / props.itemsWide}%;\n  flex: 0 0 ${props => 100 / props.itemsWide}%;\n  display: flex;\n`;\n\nexport const SwiperWrapper = styled.div<{ media: 'xs' | 'sm' | 'md' }>`\n  position: relative;\n\n  ${SwiperCanvas} {\n    ${props =>\n      isMobile(props.media)\n        ? css`\n            width: calc(100% - 80px);\n            padding: 0 40px;\n          `\n        : null}\n  }\n\n  ${ArrowLeft} {\n    ${props =>\n      isMobile(props.media)\n        ? css`\n            left: 5px;\n          `\n        : null}\n  }\n\n  ${ArrowRight} {\n    ${props =>\n      isMobile(props.media)\n        ? css`\n            right: 5px;\n          `\n        : null}\n  }\n\n  ${Item} {\n    ${props =>\n      isMobile(props.media)\n        ? css`\n            width: 100%;\n            flex-basis: 100%;\n          `\n        : null}\n  }\n`;\n","import React, { useState } from 'react';\nimport ReactResizeDetector from 'react-resize-detector';\nimport { EventData, Swipeable, SwipeableOptions } from 'react-swipeable';\n\nimport {\n  ArrowLeft,\n  ArrowRight,\n  Item,\n  SwiperCanvas,\n  SwiperWrapper,\n} from './styles';\n\nconst MEDIA_MAX_XS = 576;\nconst MEDIA_MAX_SM = 767;\n\ninterface SwiperProps {\n  items: any[];\n  itemsWide?: number;\n  infinity?: boolean;\n  canvasClassName?: string;\n  canvasStyle?: React.CSSProperties;\n  arrowClassName?: string;\n  arrowStyle?: React.CSSProperties;\n  style?: React.CSSProperties;\n}\n\nconst Swiper = ({\n  items = [],\n  itemsWide = 3,\n  infinity = false,\n  canvasClassName,\n  canvasStyle,\n  arrowClassName,\n  arrowStyle,\n  style,\n}: SwiperProps): JSX.Element => {\n  const [currentIndex, setCurrentIndex] = useState<number>(0);\n  const [slideOffset, setSlideOffset] = useState<number>(0);\n  // TODO: there has to be a better way...\n  const [lastSwipe, setLastSwipe] = useState<number | null>(null);\n  const [width, setWidth] = useState<number>(0);\n\n  const computeMedia = () => {\n    if (width <= MEDIA_MAX_XS) {\n      return 'xs';\n    }\n    if (width <= MEDIA_MAX_SM) {\n      return 'sm';\n    }\n    return 'md';\n  };\n\n  const computeItemWidth = () => {\n    return width <= MEDIA_MAX_SM ? 1 : itemsWide;\n  };\n\n  const canGoToPrevious = () => {\n    return (infinity && items.length > 1) || currentIndex !== 0;\n  };\n\n  const canGoToNext = () => {\n    const computedWide = computeItemWidth();\n\n    return (\n      (infinity && items.length > 1) ||\n      currentIndex < items.length - computedWide\n    );\n  };\n\n  const previous = () => {\n    const computedWide = computeItemWidth();\n\n    const steps = currentIndex === 0 ? computedWide : 1;\n    const prev = (items.length + currentIndex - steps) % items.length;\n\n    setCurrentIndex(canGoToPrevious() ? prev : currentIndex);\n  };\n\n  const next = () => {\n    const computedWide = computeItemWidth();\n\n    const steps = items.length - currentIndex > computedWide ? 1 : computedWide;\n    const next = (items.length + currentIndex + steps) % items.length;\n\n    setCurrentIndex(canGoToNext() ? next : currentIndex);\n  };\n\n  const resetSwipe = () => {\n    const now = new Date().getTime();\n    setSlideOffset(0);\n    setLastSwipe(now);\n  };\n\n  const onSwiping = (e: EventData) => {\n    const now = new Date().getTime();\n\n    if (!width) {\n      return;\n    }\n\n    if (lastSwipe && now - lastSwipe < 250) {\n      return;\n    }\n\n    const draggedPercent = (e.deltaX * 2) / width;\n\n    setSlideOffset(draggedPercent * 100);\n\n    if (draggedPercent < -0.3333) {\n      resetSwipe();\n      next();\n    }\n\n    if (draggedPercent > 0.3333) {\n      resetSwipe();\n      previous();\n    }\n  };\n\n  const onSwipeEnd = () => {\n    setSlideOffset(0);\n  };\n\n  const onResize = (width: number) => {\n    setWidth(width);\n  };\n\n  const swipeConfig: SwipeableOptions = {\n    trackTouch: true,\n    trackMouse: true,\n  };\n\n  // const hideArrows = false;\n  // const hideArrows = items.length <= itemsWide;\n\n  console.log('v2');\n\n  return (\n    <ReactResizeDetector handleWidth onResize={onResize}>\n      <SwiperWrapper style={style} media={computeMedia()}>\n        {/* {!hideArrows && (\n          <ArrowLeft\n            data-testid=\"prev\"\n            faded={!canGoToPrevious()}\n            onClick={previous}\n            className={arrowClassName}\n            style={arrowStyle}\n          >\n            ◀abc\n          </ArrowLeft>\n        )} */}\n        <ArrowLeft\n          data-testid=\"prev\"\n          faded={!canGoToPrevious()}\n          onClick={previous}\n          className={arrowClassName}\n          style={arrowStyle}\n        >\n          ◀abc\n        </ArrowLeft>\n        <Swipeable\n          onSwiping={eventData => onSwiping(eventData)}\n          onSwiped={onSwipeEnd}\n          {...swipeConfig}\n        >\n          defs\n          <SwiperCanvas className={canvasClassName} style={canvasStyle}>\n            {items.map((item, i) => (\n              <Item\n                key={i}\n                itemsWide={computeItemWidth()}\n                currentIndex={currentIndex}\n                data-testid=\"item\"\n                style={{\n                  left: `-${(currentIndex * 100) / computeItemWidth() -\n                    slideOffset}%`,\n                }}\n              >\n                {item}\n              </Item>\n            ))}\n          </SwiperCanvas>\n        </Swipeable>\n        {/* {!hideArrows && (\n          <ArrowRight\n            data-testid=\"next\"\n            faded={!canGoToNext()}\n            onClick={next}\n            className={arrowClassName}\n            style={arrowStyle}\n          >\n            ▶\n          </ArrowRight>\n        )} */}\n        <ArrowRight\n          data-testid=\"next\"\n          faded={!canGoToNext()}\n          onClick={next}\n          className={arrowClassName}\n          style={arrowStyle}\n        >\n          ▶\n        </ArrowRight>\n      </SwiperWrapper>\n    </ReactResizeDetector>\n  );\n};\n\nexport default Swiper;\n"],"names":["styled","css","useState","React","Swipeable"],"mappings":"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"}