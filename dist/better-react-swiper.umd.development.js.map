{"version":3,"file":"better-react-swiper.umd.development.js","sources":["../src/styles.tsx","../src/index.tsx"],"sourcesContent":["import styled, { css } from 'styled-components';\n\nconst isMobile = (media: 'xs' | 'sm' | 'md') => {\n  return media === 'xs' || media === 'sm';\n};\n\nconst color = {\n  blue: '#105783',\n};\n\nexport const SwiperCanvas = styled.div`\n  box-sizing: content-box;\n  display: flex;\n  flex-wrap: nowrap;\n  width: calc(100% - 120px);\n  margin: 0;\n  padding: 0 60px;\n  mask-image: -webkit-gradient(\n    linear,\n    left top,\n    right top,\n    color-stop(0, rgba(0, 0, 0, 0)),\n    color-stop(0.05, rgba(0, 0, 0, 1)),\n    color-stop(0.95, rgba(0, 0, 0, 1)),\n    color-stop(1, rgba(0, 0, 0, 0))\n  );\n  overflow: hidden;\n`;\n\nconst arrowStyles = css`\n  box-sizing: content-box;\n  cursor: pointer;\n  background: #fff;\n  border: 0;\n  color: ${color.blue};\n  border-radius: 4px;\n  box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.2);\n  font-size: 12px;\n  width: 30px;\n  height: 30px;\n  position: absolute;\n  top: 50%;\n  margin-top: -15px;\n  z-index: 1;\n  transition: 0.3s opacity;\n`;\n\nexport const ArrowLeft = styled.button<{ faded: boolean }>`\n  ${arrowStyles};\n  opacity: ${props => (props.faded ? 0.25 : 1)};\n  left: 10px;\n`;\n\nexport const ArrowRight = styled.button<{ faded: boolean }>`\n  ${arrowStyles};\n  opacity: ${props => (props.faded ? 0.25 : 1)};\n  right: 10px;\n`;\n\nexport const Item = styled.div<{\n  currentIndex: number;\n  itemsWide: number;\n}>`\n  transition: 0.3s left;\n  position: relative;\n  width: ${props => 100 / props.itemsWide}%;\n  flex: 0 0 ${props => 100 / props.itemsWide}%;\n  display: flex;\n`;\n\nexport const SwiperWrapper = styled.div<{ media: 'xs' | 'sm' | 'md' }>`\n  position: relative;\n\n  ${SwiperCanvas} {\n    ${props =>\n      isMobile(props.media)\n        ? css`\n            width: calc(100% - 80px);\n            padding: 0 40px;\n          `\n        : null}\n  }\n\n  ${ArrowLeft} {\n    ${props =>\n      isMobile(props.media)\n        ? css`\n            left: 5px;\n          `\n        : null}\n  }\n\n  ${ArrowRight} {\n    ${props =>\n      isMobile(props.media)\n        ? css`\n            right: 5px;\n          `\n        : null}\n  }\n\n  ${Item} {\n    ${props =>\n      isMobile(props.media)\n        ? css`\n            width: 100%;\n            flex-basis: 100%;\n          `\n        : null}\n  }\n`;\n","import React, { useState } from 'react';\nimport ReactResizeDetector from 'react-resize-detector';\nimport { EventData, Swipeable, SwipeableOptions } from 'react-swipeable';\n\nimport {\n  ArrowLeft,\n  ArrowRight,\n  Item,\n  SwiperCanvas,\n  SwiperWrapper,\n} from './styles';\n\nconst MEDIA_MAX_XS = 576;\nconst MEDIA_MAX_SM = 767;\n\ninterface SwiperProps {\n  items: any[];\n  itemsWide?: number;\n  infinity?: boolean;\n  canvasClassName?: string;\n  canvasStyle?: React.CSSProperties;\n  arrowClassName?: string;\n  arrowStyle?: React.CSSProperties;\n  style?: React.CSSProperties;\n}\n\nexport const Swiper = ({\n  items = [],\n  itemsWide = 3,\n  infinity = false,\n  canvasClassName,\n  canvasStyle,\n  arrowClassName,\n  arrowStyle,\n  style,\n}: SwiperProps): JSX.Element => {\n  const [currentIndex, setCurrentIndex] = useState<number>(0);\n  const [slideOffset, setSlideOffset] = useState<number>(0);\n\n  // TODO: there has to be a better way...\n  const [lastSwipe, setLastSwipe] = useState<number | null>(null);\n  const [width, setWidth] = useState<number>(0);\n\n  const computeMedia = () => {\n    if (width <= MEDIA_MAX_XS) {\n      return 'xs';\n    }\n    if (width <= MEDIA_MAX_SM) {\n      return 'sm';\n    }\n    return 'md';\n  };\n\n  const computeItemWidth = () => {\n    return width <= MEDIA_MAX_SM ? 1 : itemsWide;\n  };\n\n  const canGoToPrevious = () => {\n    return (infinity && items.length > 1) || currentIndex !== 0;\n  };\n\n  const canGoToNext = () => {\n    const computedWide = computeItemWidth();\n\n    return (\n      (infinity && items.length > 1) ||\n      currentIndex < items.length - computedWide\n    );\n  };\n\n  const goToPrevious = () => {\n    if (!canGoToPrevious()) {\n      return;\n    }\n\n    const computedWide = computeItemWidth();\n\n    const steps = currentIndex === 0 ? computedWide : 1;\n    const prev = (items.length + currentIndex - steps) % items.length;\n\n    setCurrentIndex(prev);\n  };\n\n  const goToNext = () => {\n    if (!canGoToNext()) {\n      return;\n    }\n\n    const computedWide = computeItemWidth();\n\n    const steps = items.length - currentIndex > computedWide ? 1 : computedWide;\n    const next = (items.length + currentIndex + steps) % items.length;\n\n    setCurrentIndex(next);\n  };\n\n  const resetSwipe = () => {\n    const now = new Date().getTime();\n    setSlideOffset(0);\n    setLastSwipe(now);\n  };\n\n  const onSwiping = (e: EventData) => {\n    const now = new Date().getTime();\n\n    if (!width) {\n      return;\n    }\n\n    if (lastSwipe && now - lastSwipe < 250) {\n      return;\n    }\n\n    const draggedPercent = (e.deltaX * 2) / width;\n\n    setSlideOffset(draggedPercent * 100);\n\n    if (draggedPercent < -0.3333) {\n      resetSwipe();\n      goToPrevious();\n      return;\n    }\n\n    if (draggedPercent > 0.3333) {\n      resetSwipe();\n      goToNext();\n      return;\n    }\n  };\n\n  const onSwipeEnd = () => {\n    setSlideOffset(0);\n  };\n\n  const onResize = (w: number) => {\n    setWidth(w);\n    resetSwipe();\n  };\n\n  const swipeConfig: SwipeableOptions = {\n    trackTouch: true,\n    trackMouse: true,\n  };\n\n  const hideArrows = items.length <= itemsWide;\n\n  return (\n    <ReactResizeDetector handleWidth onResize={onResize}>\n      <SwiperWrapper style={style} media={computeMedia()}>\n        {!hideArrows && (\n          <ArrowLeft\n            data-testid=\"prev\"\n            faded={!canGoToPrevious()}\n            onClick={goToPrevious}\n            className={arrowClassName}\n            style={arrowStyle}\n          >\n            ◀\n          </ArrowLeft>\n        )}\n        <Swipeable\n          onSwiping={eventData => onSwiping(eventData)}\n          onSwiped={onSwipeEnd}\n          {...swipeConfig}\n        >\n          <SwiperCanvas className={canvasClassName} style={canvasStyle}>\n            {items.map((item, i) => (\n              <Item\n                key={i}\n                itemsWide={computeItemWidth()}\n                currentIndex={currentIndex}\n                data-testid=\"item\"\n                style={{\n                  left: `-${(currentIndex * 100) / computeItemWidth() +\n                    slideOffset}%`,\n                }}\n              >\n                {item}\n              </Item>\n            ))}\n          </SwiperCanvas>\n        </Swipeable>\n        {!hideArrows && (\n          <ArrowRight\n            data-testid=\"next\"\n            faded={!canGoToNext()}\n            onClick={goToNext}\n            className={arrowClassName}\n            style={arrowStyle}\n          >\n            ▶\n          </ArrowRight>\n        )}\n      </SwiperWrapper>\n    </ReactResizeDetector>\n  );\n};\n\nexport default Swiper;\n"],"names":["styled","css","useState","React","Swipeable"],"mappings":";;;;;;;;;;EAEA,MAAM,QAAQ,GAAG,CAAC,KAAyB;MACzC,OAAO,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,IAAI,CAAC;EAC1C,CAAC,CAAC;EAEF,MAAM,KAAK,GAAG;MACZ,IAAI,EAAE,SAAS;GAChB,CAAC;AAEF,EAAO,MAAM,YAAY,GAAGA,eAAM,CAAC,GAAG,CAAA;;;;;;;;;;;;;;;;;CAiBrC,CAAC;EAEF,MAAM,WAAW,GAAGC,UAAG,CAAA;;;;;WAKZ,KAAK,CAAC,IAAI;;;;;;;;;;;CAWpB,CAAC;AAEF,EAAO,MAAM,SAAS,GAAGD,eAAM,CAAC,MAAM,CAAoB;IACtD,WAAW;aACF,KAAK,KAAK,KAAK,CAAC,KAAK,GAAG,IAAI,GAAG,CAAC,CAAC;;CAE7C,CAAC;AAEF,EAAO,MAAM,UAAU,GAAGA,eAAM,CAAC,MAAM,CAAoB;IACvD,WAAW;aACF,KAAK,KAAK,KAAK,CAAC,KAAK,GAAG,IAAI,GAAG,CAAC,CAAC;;CAE7C,CAAC;AAEF,EAAO,MAAM,IAAI,GAAGA,eAAM,CAAC,GAAG,CAG5B;;;WAGS,KAAK,IAAI,GAAG,GAAG,KAAK,CAAC,SAAS;cAC3B,KAAK,IAAI,GAAG,GAAG,KAAK,CAAC,SAAS;;CAE3C,CAAC;AAEF,EAAO,MAAM,aAAa,GAAGA,eAAM,CAAC,GAAG,CAA+B;;;IAGlE,YAAY;MACV,KAAK,IACL,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC;MACjBC,UAAG,CAAA;;;WAGF;MACD,IAAI;;;IAGV,SAAS;MACP,KAAK,IACL,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC;MACjBA,UAAG,CAAA;;WAEF;MACD,IAAI;;;IAGV,UAAU;MACR,KAAK,IACL,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC;MACjBA,UAAG,CAAA;;WAEF;MACD,IAAI;;;IAGV,IAAI;MACF,KAAK,IACL,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC;MACjBA,UAAG,CAAA;;;WAGF;MACD,IAAI;;CAEb,CAAC;;EClGF,MAAM,YAAY,GAAG,GAAG,CAAC;EACzB,MAAM,YAAY,GAAG,GAAG,CAAC;AAazB,QAAa,MAAM,GAAG,CAAC,EACrB,KAAK,GAAG,EAAE,EACV,SAAS,GAAG,CAAC,EACb,QAAQ,GAAG,KAAK,EAChB,eAAe,EACf,WAAW,EACX,cAAc,EACd,UAAU,EACV,KAAK,GACO;MACZ,MAAM,CAAC,YAAY,EAAE,eAAe,CAAC,GAAGC,cAAQ,CAAS,CAAC,CAAC,CAAC;MAC5D,MAAM,CAAC,WAAW,EAAE,cAAc,CAAC,GAAGA,cAAQ,CAAS,CAAC,CAAC,CAAC;;MAG1D,MAAM,CAAC,SAAS,EAAE,YAAY,CAAC,GAAGA,cAAQ,CAAgB,IAAI,CAAC,CAAC;MAChE,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAGA,cAAQ,CAAS,CAAC,CAAC,CAAC;MAE9C,MAAM,YAAY,GAAG;UACnB,IAAI,KAAK,IAAI,YAAY,EAAE;cACzB,OAAO,IAAI,CAAC;WACb;UACD,IAAI,KAAK,IAAI,YAAY,EAAE;cACzB,OAAO,IAAI,CAAC;WACb;UACD,OAAO,IAAI,CAAC;OACb,CAAC;MAEF,MAAM,gBAAgB,GAAG;UACvB,OAAO,KAAK,IAAI,YAAY,GAAG,CAAC,GAAG,SAAS,CAAC;OAC9C,CAAC;MAEF,MAAM,eAAe,GAAG;UACtB,OAAO,CAAC,QAAQ,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,KAAK,YAAY,KAAK,CAAC,CAAC;OAC7D,CAAC;MAEF,MAAM,WAAW,GAAG;UAClB,MAAM,YAAY,GAAG,gBAAgB,EAAE,CAAC;UAExC,QACE,CAAC,QAAQ,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC;cAC7B,YAAY,GAAG,KAAK,CAAC,MAAM,GAAG,YAAY,EAC1C;OACH,CAAC;MAEF,MAAM,YAAY,GAAG;UACnB,IAAI,CAAC,eAAe,EAAE,EAAE;cACtB,OAAO;WACR;UAED,MAAM,YAAY,GAAG,gBAAgB,EAAE,CAAC;UAExC,MAAM,KAAK,GAAG,YAAY,KAAK,CAAC,GAAG,YAAY,GAAG,CAAC,CAAC;UACpD,MAAM,IAAI,GAAG,CAAC,KAAK,CAAC,MAAM,GAAG,YAAY,GAAG,KAAK,IAAI,KAAK,CAAC,MAAM,CAAC;UAElE,eAAe,CAAC,IAAI,CAAC,CAAC;OACvB,CAAC;MAEF,MAAM,QAAQ,GAAG;UACf,IAAI,CAAC,WAAW,EAAE,EAAE;cAClB,OAAO;WACR;UAED,MAAM,YAAY,GAAG,gBAAgB,EAAE,CAAC;UAExC,MAAM,KAAK,GAAG,KAAK,CAAC,MAAM,GAAG,YAAY,GAAG,YAAY,GAAG,CAAC,GAAG,YAAY,CAAC;UAC5E,MAAM,IAAI,GAAG,CAAC,KAAK,CAAC,MAAM,GAAG,YAAY,GAAG,KAAK,IAAI,KAAK,CAAC,MAAM,CAAC;UAElE,eAAe,CAAC,IAAI,CAAC,CAAC;OACvB,CAAC;MAEF,MAAM,UAAU,GAAG;UACjB,MAAM,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC;UACjC,cAAc,CAAC,CAAC,CAAC,CAAC;UAClB,YAAY,CAAC,GAAG,CAAC,CAAC;OACnB,CAAC;MAEF,MAAM,SAAS,GAAG,CAAC,CAAY;UAC7B,MAAM,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC;UAEjC,IAAI,CAAC,KAAK,EAAE;cACV,OAAO;WACR;UAED,IAAI,SAAS,IAAI,GAAG,GAAG,SAAS,GAAG,GAAG,EAAE;cACtC,OAAO;WACR;UAED,MAAM,cAAc,GAAG,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,IAAI,KAAK,CAAC;UAE9C,cAAc,CAAC,cAAc,GAAG,GAAG,CAAC,CAAC;UAErC,IAAI,cAAc,GAAG,CAAC,MAAM,EAAE;cAC5B,UAAU,EAAE,CAAC;cACb,YAAY,EAAE,CAAC;cACf,OAAO;WACR;UAED,IAAI,cAAc,GAAG,MAAM,EAAE;cAC3B,UAAU,EAAE,CAAC;cACb,QAAQ,EAAE,CAAC;cACX,OAAO;WACR;OACF,CAAC;MAEF,MAAM,UAAU,GAAG;UACjB,cAAc,CAAC,CAAC,CAAC,CAAC;OACnB,CAAC;MAEF,MAAM,QAAQ,GAAG,CAAC,CAAS;UACzB,QAAQ,CAAC,CAAC,CAAC,CAAC;UACZ,UAAU,EAAE,CAAC;OACd,CAAC;MAEF,MAAM,WAAW,GAAqB;UACpC,UAAU,EAAE,IAAI;UAChB,UAAU,EAAE,IAAI;OACjB,CAAC;MAEF,MAAM,UAAU,GAAG,KAAK,CAAC,MAAM,IAAI,SAAS,CAAC;MAE7C,QACEC,6BAAC,mBAAmB,IAAC,WAAW,QAAC,QAAQ,EAAE,QAAQ;UACjDA,6BAAC,aAAa,IAAC,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,YAAY,EAAE;cAC/C,CAAC,UAAU,KACVA,6BAAC,SAAS,mBACI,MAAM,EAClB,KAAK,EAAE,CAAC,eAAe,EAAE,EACzB,OAAO,EAAE,YAAY,EACrB,SAAS,EAAE,cAAc,EACzB,KAAK,EAAE,UAAU,aAGP,CACb;cACDA,6BAACC,wBAAS,kBACR,SAAS,EAAE,SAAS,IAAI,SAAS,CAAC,SAAS,CAAC,EAC5C,QAAQ,EAAE,UAAU,IAChB,WAAW;kBAEfD,6BAAC,YAAY,IAAC,SAAS,EAAE,eAAe,EAAE,KAAK,EAAE,WAAW,IACzD,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,MACjBA,6BAAC,IAAI,IACH,GAAG,EAAE,CAAC,EACN,SAAS,EAAE,gBAAgB,EAAE,EAC7B,YAAY,EAAE,YAAY,iBACd,MAAM,EAClB,KAAK,EAAE;0BACL,IAAI,EAAE,IAAI,CAAC,YAAY,GAAG,GAAG,IAAI,gBAAgB,EAAE;4BACjD,WAAW,GAAG;uBACjB,IAEA,IAAI,CACA,CACR,CAAC,CACW,CACL;cACX,CAAC,UAAU,KACVA,6BAAC,UAAU,mBACG,MAAM,EAClB,KAAK,EAAE,CAAC,WAAW,EAAE,EACrB,OAAO,EAAE,QAAQ,EACjB,SAAS,EAAE,cAAc,EACzB,KAAK,EAAE,UAAU,aAGN,CACd,CACa,CACI,EACtB;EACJ,CAAC;;;;;;;;;"}